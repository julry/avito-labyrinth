import styled from "styled-components";
import { useProgress } from "../../contexts/ProgressContext";
import { RedStroke1Line } from "../shared/RedStrokes";
import { NewAchieveModal } from "../shared/modals";
import { BrightScreen } from "../shared/BrightScreen";
import { useSizeRatio } from "../../hooks/useSizeRatio";

const Wrapper = styled.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing_x1) * 2.5);
    font-size: var(--font_xl);
    margin-top: ${({ $ratio }) => $ratio * 63}px;
    margin-bottom: ${({ $ratio }) => $ratio * 14}px;

    & > div:first-child{
        font-size: var(--font_xl);
    }
`;

const Picture = styled.div`
    position: absolute;
    top: ${({ $ratio }) => $ratio * -55}px;
    right: ${({ $ratio }) => $ratio * 51}px;
    width: ${({ $ratio }) => $ratio * 241}px;
    height: ${({ $ratio }) => $ratio * 103}px;
`;

export const EndWeek = ({ number, children }) => {
    const ratio = useSizeRatio();
    const { next, newAchieve, setNewAchieve } = useProgress();

    return (
        <>
            <BrightScreen
                svgComponent={
                    <svg width="100%" height="100%" viewBox="0 0 359 426" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M63.5468 425.648C19.3467 425.648 9.69481 408.566 8.39853 399.94C-4.90246 311.432 1.05133 269.585 3.18089 218.784C5.0238 174.82 10.5633 71.0716 10.5633 34.6931C10.5633 -1.68552 63.5468 -0.750122 91.6834 0.375C119.82 1.50012 284.994 1.83716 317.223 4.4624C355.701 7.59668 358.072 39.0752 355.073 65.0533C352.535 87.0472 355.073 206.596 355.073 234.103C355.073 271.79 365.323 376.026 352.703 407.99C350.68 413.112 345.382 416.753 336.212 418.458C282.678 428.412 110.717 425.648 63.5468 425.648Z" fill="white" />
                    </svg>
                }
                blockSize={{ height: 426, width: 359 }}
                onClick={() => next()}
                buttonText={"Продолжить путь"}
            >
                <Wrapper $ratio={ratio}>
                    <RedStroke1Line>Глава {number} завершена</RedStroke1Line>
                    {children}
                    <Picture $ratio={ratio}>
                        <svg width="100%" height="100%" viewBox="0 0 241 103" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.00456908 75.5229C-0.0614102 74.6511 0.598398 74.3397 1.25819 74.0283C2.57778 73.5301 2.57776 73.5301 2.31384 72.2223C2.31384 72.0354 2.24788 71.8486 2.24788 71.5995C2.11592 69.9803 2.37979 69.6689 4.09525 69.6689C4.95298 69.6689 5.21693 69.9803 5.28291 70.6653C5.34889 71.2258 5.54684 71.8486 5.54684 72.4091C5.54684 73.2187 5.87675 73.5924 6.80046 73.5301C7.3283 73.4678 7.85607 73.5301 8.3839 73.5923C9.43957 73.5923 10.1654 74.4642 9.96742 75.3984C9.90144 75.8343 9.63757 76.1457 9.10974 76.208C8.51592 76.2703 7.8561 76.3948 7.26229 76.4571C6.14064 76.5816 6.14064 76.5816 6.2726 77.6404C6.33858 78.014 6.40459 78.3877 6.47057 78.8236C6.60253 79.6955 6.20665 80.5051 5.48088 80.6297C4.68913 80.8165 3.89736 80.3183 3.56746 79.5087C3.43551 79.135 3.30356 78.7613 3.1716 78.3877C2.84171 76.9553 2.84169 76.9553 1.25819 76.893C0.334481 76.6439 0.00456908 76.3325 0.00456908 75.5229Z" fill="#04E061" />
                            <path d="M188.33 85.791C188.268 85.6597 188.075 85.5903 188.012 85.459C188.123 84.8443 187.805 84.5125 187.287 84.4361C187.668 83.3725 186.956 83.2268 186.279 82.9845C186.154 82.7219 186.092 82.5906 185.968 82.328C186.141 81.8445 186.086 81.3885 185.54 81.0841C185.333 80.1375 184.67 79.2458 184.594 78.2371C185.182 78.1201 185.707 77.8718 185.459 77.3466C184.934 76.0681 185.936 76.3176 186.558 76.1039C187.18 75.8902 187.456 76.6434 188.071 76.7544C188.264 78.3504 189.307 79.7054 190.026 81.0531C192.401 85.3934 195.779 88.4565 200.388 90.2148C201.936 90.7687 203.539 91.7785 205.267 91.5242C207.942 91.0635 210.734 91.1899 213.389 90.1765C219.057 88.06 222.943 84.2149 224.949 78.6068C227.233 72.2252 225.77 66.2483 221.826 60.8014C220.942 59.6125 220.217 58.5895 220.771 57.0424C223.252 56.5124 224.986 57.4602 226.499 59.6375C230.284 64.9185 231.491 70.6949 230.313 77.0359C229.025 83.9917 225.111 89.1355 219.089 92.5436C215.93 94.3581 212.274 95.122 208.569 95.1053C204.54 95.0815 200.857 94.0907 197.215 92.6786C196.455 91.7522 195.834 90.4392 194.133 90.9215C193.878 90.7209 193.588 90.6171 193.235 90.382C192.904 89.1727 192.206 88.3777 191.011 88.059C190.624 87.9205 190.334 87.8166 189.912 87.7748C190.037 86.5107 189.298 86.1371 188.33 85.791Z" fill="#FF4052" />
                            <path d="M183.542 68.371C183.841 63.5699 186.006 59.6545 189.104 56.1819C191.6 53.4758 194.697 51.5299 198.071 50.3374C200.559 49.4827 203.206 48.7939 205.957 49.3418C207.477 49.6676 208.977 49.4409 210.532 49.6701C213.967 50.1356 216.592 51.9477 219.314 53.7943C220.468 54.5344 220.834 55.647 220.447 57.0353C217.676 55.9347 214.877 54.606 212.037 53.6988C206.709 52.1195 201.587 53.0137 196.783 55.7664C194.709 56.9876 193.146 58.61 191.39 60.163C189.565 60.3826 189.462 60.6726 190.346 61.8616C190.269 62.3797 190 62.8285 189.44 63.1735C188.679 63.7739 187.566 64.1392 188.319 65.3902C188.402 66.0742 188.256 66.7857 187.758 67.262C186.826 66.8192 186.231 67.2608 185.699 67.8338C185.256 68.7661 184.475 68.8139 183.542 68.371Z" fill="#FF4052" />
                            <path d="M183.542 68.3709C184.378 68.7791 185.159 68.7313 185.892 67.9029C186.459 67.2332 187.053 66.7916 187.952 67.3311C187.688 70.5088 187.783 73.5969 187.975 76.7197C187.457 76.6433 187.084 75.8555 186.462 76.0691C185.971 76.2207 184.838 76.0333 185.362 77.3118C185.611 77.8371 184.954 78.1474 184.498 78.2023C183.255 77.1029 183.421 75.4173 183.159 74.0147C182.711 72.2182 182.753 70.2701 183.542 68.3709Z" fill="#FF4052" />
                            <path d="M193.808 90.9143C195.412 90.3974 196.033 91.7106 196.89 92.6715C195.521 92.8363 194.665 91.8752 193.808 90.9143Z" fill="#FF4052" />
                            <path d="M190.818 87.9897C192.013 88.3085 192.711 89.1035 193.042 90.3127C192.013 89.8352 190.983 89.3577 190.818 87.9897Z" fill="#FF4052" />
                            <path d="M188.33 85.7909C189.332 86.0404 190.037 86.5107 189.815 87.7402C188.848 87.394 188.44 86.7029 188.33 85.7909Z" fill="#FF4052" />
                            <path d="M186.182 82.9499C186.859 83.1922 187.633 83.4692 187.19 84.4015C186.644 84.0971 186.098 83.7927 186.182 82.9499Z" fill="#FF4052" />
                            <path d="M187.191 84.4015C187.806 84.5125 188.027 84.8097 187.916 85.4245C187.266 85.4101 187.08 85.0163 187.191 84.4015Z" fill="#FF4052" />
                            <path d="M185.409 81.1461C185.955 81.4505 186.045 81.8098 185.837 82.39C185.388 82.1202 185.236 81.6296 185.409 81.1461Z" fill="#FF4052" />
                            <path d="M191.583 60.2321C191.34 60.909 191.195 61.6203 190.538 61.9307C189.654 60.7418 189.758 60.4518 191.583 60.2321Z" fill="#FF4052" />
                            <path d="M189.633 63.2426C189.743 64.1546 188.983 64.7551 188.512 65.4594C187.76 64.2084 188.873 63.8431 189.633 63.2426Z" fill="#FF4052" />
                            <path d="M201.216 80.5851C202.881 80.1995 202.91 78.9007 203.511 78.1343C204.078 77.4647 204.486 76.629 205.454 76.9752C206.518 77.356 207.548 77.8335 208.141 78.9185C208.266 79.1812 208.224 79.6026 208.12 79.8926C206.841 81.9435 205.527 84.0909 203.418 85.4088C202.298 86.0988 201.386 86.2086 200.004 85.4959C196.763 83.5729 196.356 82.8818 197.118 79.2278C197.436 78.0329 197.333 76.7962 197.845 75.6705C198.357 74.5448 199.014 74.2344 200.209 74.5531C200.983 74.8301 201.398 75.1965 201.28 76.136C201.155 77.4001 201.285 78.8649 201.216 80.5851Z" fill="#FF4052" />
                            <path d="M215.495 76.9691C213.657 76.3114 213.195 75.1642 213.887 73.2304C214.475 71.5866 216.141 71.2011 218.753 72.1357C220.3 72.6896 220.984 74.134 220.334 75.6464C219.552 77.2209 217.686 77.862 215.495 76.9691Z" fill="#FF4052" />
                            <path d="M196.723 62.9443C198.147 63.2355 199.135 64.1344 199.486 65.8964C199.721 67.071 199.092 67.6094 198.366 68.1131C197.605 68.7136 194.302 68.186 193.666 67.5223C192.837 66.7893 192.776 65.1313 193.426 63.6188C194.235 62.2723 194.595 62.1827 196.723 62.9443Z" fill="#FF4052" />
                            <path d="M175.665 21.9959C174.704 19.6443 173.017 18.0196 171.489 16.0607C168.564 12.3316 164.392 10.7535 160.293 8.95734C157.516 7.69705 154.407 7.72972 151.312 7.86405C147.795 7.9553 144.673 9.3387 141.55 10.7221C134.651 13.9979 130.893 19.6229 128.91 26.7562C128.027 29.996 128.001 33.4236 128.266 36.7056C128.679 42.4564 131.43 47.1442 136.214 50.0869C141.114 53.1166 146.492 55.1436 152.42 54.4976C153.858 54.3943 154.76 54.887 155.691 55.5831C156.636 56.3807 157.523 57.498 158.976 57.4963C159.573 58.033 160.067 58.5843 160.838 58.8884C160.853 58.99 160.867 59.0917 160.969 59.077C161.144 59.5706 161.507 59.9333 162.031 59.9617C162.351 60.7456 162.918 61.079 163.746 61.0635C164.488 61.8905 165.303 62.4995 166.464 61.9172C166.755 61.7716 166.929 61.5391 167.088 61.2048C166.914 61.4374 166.755 61.7716 166.464 61.9172C166.77 61.8733 167.089 61.931 167.394 61.8871C169.414 61.4926 169.472 61.173 168.656 59.1116C168.19 58.0374 167.927 56.934 168.056 55.6703C168.287 53.6658 168.299 51.5889 167.905 49.5706C167.963 49.251 167.904 48.8444 167.657 48.5687C168.121 47.4644 168.047 46.23 167.973 44.9956C168.132 44.6614 168.19 44.3418 168.364 44.1092C171.762 41.7525 173.662 38.3662 175.097 34.632C176.909 30.636 177.428 26.3074 175.665 21.9959ZM167.32 60.6527C167.408 60.5364 167.378 60.3331 167.465 60.2168C167.378 60.3331 167.393 60.4347 167.32 60.6527ZM171.027 33.7654C169.738 37.0637 167.982 40.0141 165.326 42.4716C163.395 44.2022 163.833 46.5254 163.617 48.6316C163.531 49.474 163.764 50.3742 163.896 51.289C163.897 52.0152 163.781 52.6544 163.884 53.3659C163.958 55.3265 164.06 55.3118 161.968 55.1981C162.128 55.5901 162.288 55.982 162.739 56.2284C162.404 56.069 162.142 55.6917 161.968 55.1981L161.851 55.1111C161.415 54.9664 160.907 55.0396 160.383 55.0112C160.805 55.0542 161.328 55.0827 161.851 55.1111C161.676 53.8913 160.528 53.8491 159.728 53.3417C158.433 51.5568 156.993 50.2079 154.465 50.6756C151.138 51.3621 148.071 50.2473 144.931 49.3505C142.548 48.6562 140.41 47.5114 138.447 46.1339C135.001 43.8287 133.457 40.3158 133.003 36.4386C132.768 34.0861 132.94 31.675 133.228 29.3509C133.732 24.9206 135.559 21.0262 138.651 17.9872C141.467 15.1954 144.996 13.0273 148.86 11.7447C151.242 10.9867 153.771 11.2451 156.155 11.9395C158.422 12.5468 160.893 13.1249 162.74 14.4153C166.913 17.4458 171.116 20.6796 172.211 26.1246C172.577 28.6658 171.911 31.2518 171.027 33.7654Z" fill="#955EEB" />
                            <path d="M152.717 27.682C153.267 26.4222 153.646 25.4232 154.119 24.3516C154.833 22.7731 157.601 21.6662 160.134 21.8327C160.663 21.8746 160.909 22.1343 161.045 22.3509C161.452 23.0006 161.859 23.6504 161.763 24.4316C161.465 26.7177 161.363 28.9164 160.544 31.2183C159.562 33.8389 158.044 36.3597 156.533 38.9384C156.284 39.3874 156.043 39.8943 155.888 40.2708C155.579 41.0237 154.784 41.3152 153.768 41.5205C152.752 41.7258 151.9 41.6125 151.21 41.1805C149.95 40.4174 149.092 39.5375 148.319 38.5272C146.366 35.8569 143.91 33.3181 142.751 30.3563C142.236 28.9548 141.815 27.4808 142.323 25.9318C142.772 24.6867 143.25 24.3816 145.205 24.1593C146.237 24.0696 147.322 23.6182 148.225 24.0786C149.69 24.8122 151.633 25.2407 152.124 26.4687C152.293 26.9166 152.437 27.191 152.717 27.682Z" fill="#10AFFF" />
                            <path d="M25.8039 98.5652C25.8039 96.4312 25.0676 94.4443 24.1104 92.531C23.4478 91.1328 22.5642 89.8082 21.3126 88.7779C20.8708 88.41 20.5763 88.042 20.429 87.4533C20.3554 87.0854 20.0609 86.8646 19.7664 86.6438C18.8092 85.9815 18.7356 85.6136 19.6191 85.0249C20.8708 84.1418 22.1225 83.2588 23.4478 82.5229C24.7731 81.8606 25.6566 80.7567 26.3193 79.5057C26.9083 78.4019 27.4974 77.2244 27.8655 75.9734C28.16 74.8696 29.338 74.3545 30.3688 74.8696C30.9579 75.1639 30.9579 75.8262 31.0315 76.4149C31.1788 77.9603 31.3996 79.4321 31.8414 80.9038C32.5041 83.1851 34.2712 84.5833 35.9646 85.9815C36.8482 86.7174 36.8481 86.791 36.2591 87.6741C36.0382 87.9685 35.8174 88.4099 35.4492 88.6307C32.1359 90.6912 30.5897 94.0027 29.1908 97.4614C28.8963 98.1973 28.9699 98.9333 28.8963 99.7427C28.749 100.92 28.2336 101.582 27.571 101.582C26.8347 101.582 25.8775 100.552 25.8039 99.6691C25.7303 99.2275 25.8039 98.8596 25.8039 98.5652ZM21.9752 86.5703C22.0489 86.7174 22.0488 86.9382 22.0488 86.9382C24.3313 88.2628 25.8039 90.2497 26.7611 92.6781C27.1292 93.6348 27.6446 93.6348 28.2336 92.6781C29.4117 90.912 30.5897 89.2194 32.2096 87.8212C33.0931 87.0854 33.0195 86.5702 31.9887 85.9079C30.8106 85.0985 30.0743 83.9946 29.6326 82.7436C29.4117 82.1549 29.1172 81.7133 28.6754 81.1982C26.7611 83.3323 25.2885 86.0551 21.9752 86.5703Z" fill="#00AAFF" />
                            <path d="M21.9746 86.5705C25.2143 86.0553 26.6868 83.3325 28.6748 81.1984C29.1165 81.7135 29.411 82.1551 29.6319 82.7438C30.1473 83.9948 30.81 85.0987 31.9881 85.9081C33.0188 86.5704 33.0925 87.0856 32.2089 87.8214C30.5891 89.2196 29.4111 90.9122 28.233 92.6783C27.644 93.5614 27.1286 93.5614 26.7605 92.6783C25.8033 90.2499 24.3307 88.263 22.0482 86.9384C22.0482 86.8648 22.0482 86.7176 21.9746 86.5705Z" fill="#00AAFF" />
                        </svg>
                    </Picture>
                </Wrapper>
            </BrightScreen>
            <NewAchieveModal isOpen={newAchieve !== undefined} achieveId={newAchieve} onClose={() => { setNewAchieve() }} />
        </>
    )
}