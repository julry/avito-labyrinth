import styled from 'styled-components';
import { useSizeRatio } from '../../../../hooks/useSizeRatio';
import { BlueText, PurpleText } from '../../../shared/Texts';
import { useProgress } from '../../../../contexts/ProgressContext';

const SvgStyled = styled.div`
    position: absolute;
    inset: 0;
    z-index: 1;
    width: ${({$ratio})=> $ratio * 357}px;
    height: ${({$ratio})=> $ratio * 504}px;
`;


const Content = styled.div`
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: ${({$ratio})=> $ratio * 21}px ${({$ratio})=> $ratio * 13}px ${({$ratio})=> $ratio * 37}px ${({$ratio})=> $ratio * 15}px;
`;

const BlueTextStyled = styled(BlueText)`
    font-size: ${({$ratio})=> $ratio * 27}px;
    margin-bottom: ${({$ratio})=> $ratio * 42}px;
`;

const PointsWrapper = styled.div`
    position: relative;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    width: 100%;
`;

const PointImg = styled.div`
    position: absolute;
    top: 0;
    left: ${({$ratio})=> $ratio * 57}px;
    width: ${({$ratio})=> $ratio * 229}px;
    height: ${({$ratio})=> $ratio * 133}px;
`;

const PointsTitle = styled.h3`
    line-height: 100%;
    font-size: ${({$ratio})=> $ratio * 19}px;
`;

const Points = styled.h3`
    font-size: ${({$ratio})=> $ratio * 115}px;
    font-weight: 900;
    color: #FF4052;
    margin-top: ${({$ratio})=> $ratio * -5}px;
    line-height: 100%;
`;

const InfoTitle = styled.p`
    margin-top: ${({$mt})=> $mt}px;
    font-weight: 500;
    text-align: center;
`;

const InfoRow = styled.div`
    display: flex;
    align-items: center;
    margin-top: var(--spacing_x2);
    gap: var(--spacing_x2);
    width: 100%;
    justify-content: flex-start;
    line-height: 100%;
    

    & > p:first-child {
        flex-shrink: 0;
        min-width: ${({$ratio})=> $ratio * 70}px;
        padding-top: ${({$ratio})=> $ratio * 6}px;
    }
`;

export const UntargetedPart = () => {
    const { user } = useProgress();
    const ratio = useSizeRatio();

    return (
        <>
            <SvgStyled $ratio={ratio}>
                <svg width="100%" height="100%" viewBox="0 0 357 504" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M61.9172 503.621C17.7725 503.621 8.13271 485.236 6.83805 475.952C-6.44626 380.69 4.18163 249.724 1.62696 237.211C-0.927711 224.697 1.62696 68.8512 1.62696 29.697C1.62696 -9.45721 61.9172 0.926758 90.0185 2.1377C118.12 3.34866 289.311 -0.687866 321.5 2.1377C359.93 5.51111 356.073 34.7466 353.078 62.7067C350.543 86.3787 353.078 224.093 353.078 253.699C353.078 294.261 363.315 450.214 350.71 484.616C348.69 490.129 343.399 494.048 334.241 495.883C280.773 506.596 109.029 503.621 61.9172 503.621Z" fill="white"/>
                </svg>
            </SvgStyled>
            <Content $ratio={ratio}>
                <BlueTextStyled $ratio={ratio}>Финальный розыгрыш</BlueTextStyled>
                <PointsWrapper>
                    <PointImg $ratio={ratio}>
                        <svg width="100%" height="100%" viewBox="0 0 229 133" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M59.192 125.898C58.9996 125.898 58.8072 125.898 79.4425 124.869C100.078 123.839 141.547 121.779 162.573 120.718C183.599 119.657 182.925 119.657 181.327 120.142C179.73 120.626 177.228 121.595 174.737 122.398C172.245 123.2 169.84 123.806 158.594 125.148C147.349 126.489 127.336 128.549 116.689 129.731C106.043 130.914 105.37 131.156 116.472 130.917C127.575 130.679 150.474 129.952 174.067 129.203" stroke="#FF4052" strokeWidth="3.04651" strokeLinecap="round"/>
                            <path d="M214.493 38.5126C214.493 38.5126 214.188 38.4338 213.883 38.4338C212.967 38.5913 212.662 38.0401 212.433 37.1739C211.823 34.8115 211.136 32.5278 210.144 30.2442C209.228 28.118 207.855 26.3068 206.1 24.8107C205.108 23.9444 204.116 23.0782 203.124 22.1332C202.361 21.4245 201.674 20.7946 200.682 20.6371C199.156 20.4796 199.767 19.0622 199.385 18.2747C199.004 17.4085 199.919 17.251 200.377 17.0147C200.835 16.7785 201.293 16.5423 201.751 16.5423C203.506 16.5423 205.032 15.7548 206.329 14.5736C208.236 12.7624 209.61 10.6362 210.602 8.11636C211.441 5.91145 212.204 3.78529 212.357 1.42289C212.433 0.714172 212.738 -0.0732853 213.501 0.00546137C214.341 0.084208 215.409 0.00548061 215.867 1.10793C216.172 1.97415 216.401 2.91908 216.63 3.78529C217.393 6.77766 217.774 9.77005 218.614 12.7624C218.919 13.8649 219.453 14.8886 219.987 15.8335C221.055 17.8022 223.192 18.7471 225.405 18.1959C226.32 17.9597 227.083 18.2747 227.847 18.7472C228.991 19.5346 229.067 20.2434 227.923 21.0308C226.397 22.0545 224.871 22.9995 223.192 23.8657C219.148 25.9131 216.706 28.9842 216.63 33.7878C216.63 34.969 216.325 36.1502 216.096 37.3314C215.943 38.1189 215.714 38.8276 214.493 38.5126ZM204.192 19.1409C208.008 22.2908 211.365 25.2044 213.654 29.4567C215.18 25.2832 218.232 22.9207 222.2 20.8733C219.911 20.5583 218.766 19.2197 217.469 18.0385C216.859 17.4872 216.325 16.6997 216.096 15.8335C215.562 14.1011 214.799 12.4474 214.57 10.6363C214.493 10.2425 214.57 9.77003 213.883 9.53379C213.273 10.5575 212.662 11.66 212.052 12.7624C210.297 15.7548 208.236 18.3534 204.192 19.1409Z" fill="#965EEB"/>
                            <path d="M7.16527 68.949C7.16527 66.7818 6.41753 64.7641 5.44552 62.8211C4.77259 61.4013 3.87536 60.0561 2.60427 59.0099C2.15565 58.6363 1.85657 58.2626 1.70703 57.6648C1.63226 57.2911 1.3332 57.0669 1.03412 56.8427C0.0621149 56.1702 -0.0126643 55.7966 0.884575 55.1987C2.15566 54.302 3.42676 53.4052 4.77262 52.6579C6.11848 51.9853 7.01569 50.8644 7.68862 49.594C8.28678 48.473 8.88496 47.2773 9.25881 46.0069C9.55789 44.8859 10.7542 44.3628 11.801 44.8859C12.3991 45.1849 12.3991 45.8574 12.4739 46.4552C12.6235 48.0246 12.8477 49.5192 13.2964 51.0138C13.9693 53.3304 15.7638 54.7503 17.4835 56.1702C18.3807 56.9175 18.3807 56.9922 17.7826 57.889C17.5582 58.1879 17.334 58.6362 16.9601 58.8604C13.5955 60.9529 12.0253 64.3157 10.6047 67.828C10.3056 68.5753 10.3803 69.3227 10.3056 70.1447C10.156 71.3404 9.63265 72.013 8.95972 72.013C8.21202 72.013 7.24004 70.9667 7.16527 70.0699C7.0905 69.6215 7.16527 69.2479 7.16527 68.949ZM3.27722 56.768C3.35199 56.9175 3.35197 57.1417 3.35197 57.1417C5.66984 58.4868 7.16526 60.5045 8.13727 62.9706C8.51112 63.9421 9.0345 63.9421 9.63266 62.9706C10.829 61.177 12.0253 59.4583 13.6702 58.0384C14.5675 57.2911 14.4927 56.768 13.4459 56.0954C12.2496 55.2734 11.5019 54.1524 11.0533 52.882C10.829 52.2842 10.5299 51.8358 10.0813 51.3127C8.13725 53.4799 6.64187 56.2449 3.27722 56.768Z" fill="#00AAFF"/>
                            <path d="M3.27612 56.7682C6.566 56.2451 8.06138 53.48 10.0802 51.3129C10.5288 51.836 10.8279 52.2843 11.0522 52.8822C11.5756 54.1526 12.2485 55.2736 13.4448 56.0956C14.4916 56.7682 14.5664 57.2913 13.6691 58.0386C12.0242 59.4584 10.8279 61.1772 9.63157 62.9707C9.03341 63.8675 8.51002 63.8675 8.13617 62.9707C7.16416 60.5046 5.66874 58.487 3.35087 57.1418C3.35087 57.0671 3.35089 56.9177 3.27612 56.7682Z" fill="#00AAFF"/>
                            <path d="M26.6636 27.2704C26.5966 26.385 27.2666 26.0688 27.9366 25.7526C29.2767 25.2467 29.2767 25.2467 29.0087 23.9186C29.0087 23.7288 28.9417 23.5391 28.9417 23.2861C28.8077 21.6418 29.0756 21.3256 30.8177 21.3256C31.6887 21.3256 31.9567 21.6418 32.0237 22.3375C32.0908 22.9067 32.2918 23.5391 32.2918 24.1083C32.2918 24.9305 32.6268 25.3099 33.5648 25.2467C34.1008 25.1834 34.6368 25.2467 35.1728 25.3099C36.2449 25.3099 36.9819 26.1953 36.7809 27.144C36.7139 27.5867 36.4459 27.9029 35.9099 27.9661C35.3069 28.0293 34.6368 28.1558 34.0338 28.2191C32.8948 28.3456 32.8948 28.3456 33.0288 29.4207C33.0958 29.8001 33.1628 30.1796 33.2298 30.6223C33.3638 31.5077 32.9618 32.3299 32.2248 32.4563C31.4208 32.6461 30.6167 32.1401 30.2817 31.318C30.1477 30.9385 30.0137 30.5591 29.8797 30.1796C29.5447 28.725 29.5447 28.725 27.9366 28.6618C26.9986 28.4088 26.6636 28.0926 26.6636 27.2704Z" fill="#04E061"/>
                        </svg>
                    </PointImg>
                    <PointsTitle $ratio={ratio}>Твои баллы:</PointsTitle>
                    <Points $ratio={ratio}>{user.pointsUntarget ?? 0}</Points>
                </PointsWrapper>
                <InfoTitle $mt={ratio * 38}>
                    Для участия в розыгрыше нужно набрать не меньше 45 баллов.{'\n'}Как это сделать?
                </InfoTitle>
                <InfoRow $ratio={ratio}><PurpleText>+10 б.</PurpleText>за регистрацию в игре </InfoRow>
                <InfoRow $ratio={ratio}><PurpleText>+10 б.</PurpleText>за подписку на Телеграм-канал @futru</InfoRow>
                <InfoRow $ratio={ratio}><PurpleText>+5 б.</PurpleText>за каждое достижение в игре (max 9)</InfoRow>
                <InfoTitle $mt={ratio * 26}>Максимум — 65 б.</InfoTitle>
            </Content>
        </>
    )
}